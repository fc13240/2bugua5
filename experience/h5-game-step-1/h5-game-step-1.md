# H5小游戏半入门趟坑之旅

最近两周，都在折腾一个投篮的H5小游戏，之前还从没接触过，算是完全新手吧，用上周天QA的话说，“下周
就要上线了，现在刚开始 hello world”。

这次尝试了 `Phaser.js` 和 `egret` 两个H5游戏引擎。什么？你问为什么一个H5小游戏，会用到两个
游戏引擎，哎，说来都是泪啊……


## pahser.js

其实，就开发体验来说，我感觉 `phaser` 比 `egret` 舒服一些，原生JS实现，没有环境依赖，撸起袖子就是
干！

**物理引擎** 方面，我只尝试了下 `arcade`，本来想说 `arcade` 下调试完全OK了，再切到 `p2` 引擎看看，
谁曾想，`phaser`目前还 **不支持** 游戏强制 `landscape` 渲染！！

详细的一些东东，可以参见[这篇文章](https://github.com/sophister/2bugua5/blob/master/2017/20170605-20170611.md)


## egret

`egret` 是国内的一款H5游戏引擎，看了些网上关于H5游戏引擎的对比，这个引擎用的还挺多的，几乎覆盖了50%，应该
是比较成熟了。

有了`phaser`的坑，这次一上来就先看`egret`是否支持游戏强制`landscape`渲染。还是中国人懂中国啊！
对横屏游戏的支持，简直是perfect！

`egret`文档写的很好，不仅仅是API文档(phaser基本是API文档)，还包含了一些设计思想、用法demo、最佳实践等等。
但是`egret`的依赖环境要复杂一些：

* 语言不是原生JavaScript，而是 `TypeScript`
* 不能“撸起袖子开干”，需要用`egret`提供的IDE，IDE又和具体的引擎是分离的(整环境也花了几个小时……)
* 引入第三方库，貌似不太容易，因为需要提供 `TypeScript`接口文件(我还没试过)
* 没有集成物理引擎，和`p2`结合的文档也不多

当然了，`egret`确实是很成熟的，这些方面，都相当不错：

* IDE一旦配置好(虽然有点坑)，用起来很方便的，比如资源文件自动导入JSON配置
* `egret wing`里，一键编译、本地调试
* `TextureMerger`里编辑帧动画，导出动画配置，用起来确实舒服
* `egret wing`支持一键发布，到处最终的release版本

当然，`egret`上也遇到了一些问题，框架本身没有集成 **物理引擎**，需要自己手动去添加。本来我想找下`arcade`，
没找到相关信息，看到的基本都是用`p2`引擎。好吧，直接上高级货了。

`p2`，怎么说呢，一句话，想说爱你不容易……

* `p2`文档，写的简直了，看了一遍，还是写不出hello world
* `p2`物理世界里，圆点坐标在 左下角，Y轴是 **向上为正**，这点和H5里不一样
* `p2`物理世界里的单位，不是 像素px，但是文档里也没找到怎么来对应
* 也由于上线这点的关系，我给 物理世界 一个圆形，半径为 60px，但是实际在物理世界里，明显要大于60px……
* `p2`里处理碰撞、摩擦，依然缺少文档，只能通过在网上找demo，然后修改参数，来看实际效果


## 结束

OK，上面就是这两周的H5小游戏之旅，放上游戏二维码，需要 **微信里打开** 哦：

![在线H5投篮小游戏](./basketball.png)
